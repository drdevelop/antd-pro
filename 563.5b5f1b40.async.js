(self.webpackChunkantd_pro_x=self.webpackChunkantd_pro_x||[]).push([[563],{82563:function(S,N,t){"use strict";t.r(N),t.d(N,{default:function(){return pe},registerComponent:function(){return ue},registerComponents:function(){return me}});var Z=t(57213),o=t.n(Z),y=t(54306),h=t.n(y),p=t(12342),F=t.n(p),d=t(50959),T=t(87383),A=t(25359),H=t.n(A),k=t(49811),B=t.n(k),K=t(52510),V=t.n(K),w=t(48474),b=t(57154),Y=t(62870),E=t(23116),z=t(23551),L=t(31159),v=t(11527),J=function(e){var c=e.value,i=e.onChange,n=e.className,r=e.style,u=e.data;return(0,v.jsx)(L.ZP.Group,{className:n,style:r,value:c,onChange:i,children:u==null?void 0:u.map(function(P){return(0,v.jsx)(L.ZP,{value:P.value,children:P.label})})})},Q=J,U=function(e,c){var i=function(r){var u=o()(o()({},typeof c=="function"?c(r):c),r);return(0,v.jsx)(e,o()({},u))};return i.displayName="MultipleSelect",i},R=U,X=["elementSpecProps"],q=function(e){var c=function(n){var r=n.elementSpecProps,u=F()(n,X),P=o()(o()({},u),r);return(0,v.jsx)(e,o()({},P))};return c.displayName="withFieldMapToProps",c},g=q,_=R(w.Z,function(a){return{showSearch:!0,filterOption:function(c,i){var n;return(i==null||(n=i.children)===null||n===void 0?void 0:n.toLowerCase().indexOf(c.toLowerCase()))>=0},options:a.data}}),ee=R(w.Z,function(a){return{showSearch:!0,mode:"multiple",filterOption:function(c,i){var n;return(i==null||(n=i.children)===null||n===void 0?void 0:n.toLowerCase().indexOf(c.toLowerCase()))>=0},options:a.data}}),te=R(b.Z,function(a){return{treeData:a.data,treeCheckable:!0,showCheckedStrategy:b.Z.SHOW_PARENT,treeDataSimpleMode:!0,multiple:!0,showSearch:!0,treeNodeFilterProp:"title"}}),re=R(Y.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}),ne=R(Y.Z.RangePicker,{format:"YYYY-MM-DD HH:mm:ss"}),ae=R(Y.Z.RangePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}),oe=R(Y.Z.RangePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}),ie=R(E.Z,function(a){return{checked:a.value}}),ce=R(E.Z,function(a){return{optionType:"button",options:a.data}}),le={input:g(z.Z),select:g(_),multipleSelect:g(ee),radio:g(Q),radioButton:g(ce),treeSelect:g(te),datePicker:g(re),dateRangePicker:g(ne),dateTimeRangePicker:g(ae),timeRangePicker:g(oe),switch:g(ie)},se=le,G=se;function ue(a){Object.assign(G,V()({},a.name,a))}function me(a){console.log("global registerComponents",a),Object.assign(G,a)}var de=G,fe=function(e){var c=e.components,i=e.style,n=e.className,r=e.type,u=e.component,P=e.fieldName,M=e.value,j=e.onChange,D=e.data,m=e.elementSpecProps,l={style:i,className:n,id:P,value:M,onChange:j,data:D,elementSpecProps:m},f=o()(o()({},de),c);if(r==="custom"&&u)return d.isValidElement(u)?d.cloneElement(u,l):d.createElement(u,l);var x=f[r];return x?(console.log("provideProps",r,l),(0,v.jsx)(x,o()({},l))):(console.error("component ".concat(r," is not registe")),null)},ve=fe,he=function(e){var c=e.dependencies;console.log("FormItemRender",e);var i=(0,d.useState)(e.data),n=h()(i,2),r=n[0],u=n[1],P=function(){var D=B()(H()().mark(function m(l,f){var x;return H()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,l(f);case 2:x=C.sent,console.log("fetchRemoteData",x),u(x);case 5:case"end":return C.stop()}},m)}));return function(l,f){return D.apply(this,arguments)}}();(0,d.useEffect)(function(){typeof e.remoteData=="function"?P(e.remoteData):e.data&&u(e.data)},[e.remoteData,e.data]);var M=function(){var m=e.type,l=e.component;return m==="custom"||d.isValidElement(l)?!1:typeof l=="function"},j=function(m){var l={name:m.fieldName,label:m.label,dependencies:m.dependencies},f=o()({components:m.components,data:r,type:m.type},m.elementSpecProps);return console.log("render form item",l,f),(0,v.jsx)(T.Z.Item,o()(o()({},l),{},{children:(0,v.jsx)(ve,o()({},f))}))};return c?(0,v.jsx)(T.Z.Item,{noStyle:!0,dependencies:c,children:function(m){var l=o()({},e);if(M()){var f=l.component(m);if(f===null)return null;delete l.component,f.remoteData&&!r&&P(f.remoteData),Object.assign(l,f)}return j(l)}}):j(e)},ge=he;function Pe(a,e,c,i){var n,r;return(0,v.jsx)(ge,o()(o()({components:c},a[e]),(n=a[e])===null||n===void 0||(r=n.mapStateToSchema)===null||r===void 0?void 0:r.call(n,i)),e)}var Se=["form","components","schema","schemaGroups","groupRender","groupsRender","globalState"],ye=function(e,c){var i=e.form,n=e.components,r=e.schema,u=e.schemaGroups,P=e.groupRender,M=e.groupsRender,j=e.globalState,D=F()(e,Se),m=T.Z.useForm(),l=h()(m,1),f=l[0],x=i||f,$=(0,d.useState)(0),C=h()($,2),Re=C[0],Fe=C[1];(0,d.useImperativeHandle)(c,function(){return{forceRefresh:function(){return Fe(function(s){return s++})}}});var je=(0,d.useMemo)(function(){var O={};return r instanceof Array?(r.forEach(function(s){O[s.fieldName]=s}),O):r},[r]),De=function(s){return s||[{list:r instanceof Array?r.map(function(I){return I.fieldName}):Object.keys(r)}]},xe=function(s){return Object.values(s.list).map(function(I){return Pe(je,I,n,j)})},Ce=function(s){return s},Oe=function(s){var I=s.render||P||Ce;return console.log("renderGroup",s),I(xe(s),s,j)},W=function(){var s=De(u),I=s==null?void 0:s.map(Oe);return console.log("groups",I),I},Ie=(0,d.useMemo)(function(){return M?M(W()):W()},[r,u,j,Re]);return(0,v.jsx)(T.Z,o()(o()({form:x},D),{},{children:(0,v.jsxs)(v.Fragment,{children:[Ie,e.children]})}))},pe=ye},12342:function(S,N,t){var Z=t(20006);function o(y,h){if(y==null)return{};var p=Z(y,h),F,d;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(y);for(d=0;d<T.length;d++)F=T[d],!(h.indexOf(F)>=0)&&Object.prototype.propertyIsEnumerable.call(y,F)&&(p[F]=y[F])}return p}S.exports=o,S.exports.__esModule=!0,S.exports.default=S.exports},20006:function(S){function N(t,Z){if(t==null)return{};var o={},y=Object.keys(t),h,p;for(p=0;p<y.length;p++)h=y[p],!(Z.indexOf(h)>=0)&&(o[h]=t[h]);return o}S.exports=N,S.exports.__esModule=!0,S.exports.default=S.exports}}]);
